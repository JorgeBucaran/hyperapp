{"version":3,"file":"hyperapp.html.min.js","sources":["../node_modules/hyperscript-attribute-to-property/index.js","../node_modules/hyperx/index.js","../src/app.js","../src/h.js","../src/html.js"],"sourcesContent":["module.exports = attributeToProperty\n\nvar transform = {\n  'class': 'className',\n  'for': 'htmlFor',\n  'http-equiv': 'httpEquiv'\n}\n\nfunction attributeToProperty (h) {\n  return function (tagName, attrs, children) {\n    for (var attr in attrs) {\n      if (attr in transform) {\n        attrs[transform[attr]] = attrs[attr]\n        delete attrs[attr]\n      }\n    }\n    return h(tagName, attrs, children)\n  }\n}\n","var attrToProp = require('hyperscript-attribute-to-property')\n\nvar VAR = 0, TEXT = 1, OPEN = 2, CLOSE = 3, ATTR = 4\nvar ATTR_KEY = 5, ATTR_KEY_W = 6\nvar ATTR_VALUE_W = 7, ATTR_VALUE = 8\nvar ATTR_VALUE_SQ = 9, ATTR_VALUE_DQ = 10\nvar ATTR_EQ = 11, ATTR_BREAK = 12\n\nmodule.exports = function (h, opts) {\n  h = attrToProp(h)\n  if (!opts) opts = {}\n  var concat = opts.concat || function (a, b) {\n    return String(a) + String(b)\n  }\n\n  return function (strings) {\n    var state = TEXT, reg = ''\n    var arglen = arguments.length\n    var parts = []\n\n    for (var i = 0; i < strings.length; i++) {\n      if (i < arglen - 1) {\n        var arg = arguments[i+1]\n        var p = parse(strings[i])\n        var xstate = state\n        if (xstate === ATTR_VALUE_DQ) xstate = ATTR_VALUE\n        if (xstate === ATTR_VALUE_SQ) xstate = ATTR_VALUE\n        if (xstate === ATTR_VALUE_W) xstate = ATTR_VALUE\n        if (xstate === ATTR) xstate = ATTR_KEY\n        p.push([ VAR, xstate, arg ])\n        parts.push.apply(parts, p)\n      } else parts.push.apply(parts, parse(strings[i]))\n    }\n\n    var tree = [null,{},[]]\n    var stack = [[tree,-1]]\n    for (var i = 0; i < parts.length; i++) {\n      var cur = stack[stack.length-1][0]\n      var p = parts[i], s = p[0]\n      if (s === OPEN && /^\\//.test(p[1])) {\n        var ix = stack[stack.length-1][1]\n        if (stack.length > 1) {\n          stack.pop()\n          stack[stack.length-1][0][2][ix] = h(\n            cur[0], cur[1], cur[2].length ? cur[2] : undefined\n          )\n        }\n      } else if (s === OPEN) {\n        var c = [p[1],{},[]]\n        cur[2].push(c)\n        stack.push([c,cur[2].length-1])\n      } else if (s === ATTR_KEY || (s === VAR && p[1] === ATTR_KEY)) {\n        var key = ''\n        var copyKey\n        for (; i < parts.length; i++) {\n          if (parts[i][0] === ATTR_KEY) {\n            key = concat(key, parts[i][1])\n          } else if (parts[i][0] === VAR && parts[i][1] === ATTR_KEY) {\n            if (typeof parts[i][2] === 'object' && !key) {\n              for (copyKey in parts[i][2]) {\n                if (parts[i][2].hasOwnProperty(copyKey) && !cur[1][copyKey]) {\n                  cur[1][copyKey] = parts[i][2][copyKey]\n                }\n              }\n            } else {\n              key = concat(key, parts[i][2])\n            }\n          } else break\n        }\n        if (parts[i][0] === ATTR_EQ) i++\n        var j = i\n        for (; i < parts.length; i++) {\n          if (parts[i][0] === ATTR_VALUE || parts[i][0] === ATTR_KEY) {\n            if (!cur[1][key]) cur[1][key] = strfn(parts[i][1])\n            else cur[1][key] = concat(cur[1][key], parts[i][1])\n          } else if (parts[i][0] === VAR\n          && (parts[i][1] === ATTR_VALUE || parts[i][1] === ATTR_KEY)) {\n            if (!cur[1][key]) cur[1][key] = strfn(parts[i][2])\n            else cur[1][key] = concat(cur[1][key], parts[i][2])\n          } else {\n            if (key.length && !cur[1][key] && i === j\n            && (parts[i][0] === CLOSE || parts[i][0] === ATTR_BREAK)) {\n              // https://html.spec.whatwg.org/multipage/infrastructure.html#boolean-attributes\n              // empty string is falsy, not well behaved value in browser\n              cur[1][key] = key.toLowerCase()\n            }\n            break\n          }\n        }\n      } else if (s === ATTR_KEY) {\n        cur[1][p[1]] = true\n      } else if (s === VAR && p[1] === ATTR_KEY) {\n        cur[1][p[2]] = true\n      } else if (s === CLOSE) {\n        if (selfClosing(cur[0]) && stack.length) {\n          var ix = stack[stack.length-1][1]\n          stack.pop()\n          stack[stack.length-1][0][2][ix] = h(\n            cur[0], cur[1], cur[2].length ? cur[2] : undefined\n          )\n        }\n      } else if (s === VAR && p[1] === TEXT) {\n        if (p[2] === undefined || p[2] === null) p[2] = ''\n        else if (!p[2]) p[2] = concat('', p[2])\n        if (Array.isArray(p[2][0])) {\n          cur[2].push.apply(cur[2], p[2])\n        } else {\n          cur[2].push(p[2])\n        }\n      } else if (s === TEXT) {\n        cur[2].push(p[1])\n      } else if (s === ATTR_EQ || s === ATTR_BREAK) {\n        // no-op\n      } else {\n        throw new Error('unhandled: ' + s)\n      }\n    }\n\n    if (tree[2].length > 1 && /^\\s*$/.test(tree[2][0])) {\n      tree[2].shift()\n    }\n\n    if (tree[2].length > 2\n    || (tree[2].length === 2 && /\\S/.test(tree[2][1]))) {\n      throw new Error(\n        'multiple root elements must be wrapped in an enclosing tag'\n      )\n    }\n    if (Array.isArray(tree[2][0]) && typeof tree[2][0][0] === 'string'\n    && Array.isArray(tree[2][0][2])) {\n      tree[2][0] = h(tree[2][0][0], tree[2][0][1], tree[2][0][2])\n    }\n    return tree[2][0]\n\n    function parse (str) {\n      var res = []\n      if (state === ATTR_VALUE_W) state = ATTR\n      for (var i = 0; i < str.length; i++) {\n        var c = str.charAt(i)\n        if (state === TEXT && c === '<') {\n          if (reg.length) res.push([TEXT, reg])\n          reg = ''\n          state = OPEN\n        } else if (c === '>' && !quot(state)) {\n          if (state === OPEN) {\n            res.push([OPEN,reg])\n          } else if (state === ATTR_KEY) {\n            res.push([ATTR_KEY,reg])\n          } else if (state === ATTR_VALUE && reg.length) {\n            res.push([ATTR_VALUE,reg])\n          }\n          res.push([CLOSE])\n          reg = ''\n          state = TEXT\n        } else if (state === TEXT) {\n          reg += c\n        } else if (state === OPEN && /\\s/.test(c)) {\n          res.push([OPEN, reg])\n          reg = ''\n          state = ATTR\n        } else if (state === OPEN) {\n          reg += c\n        } else if (state === ATTR && /[\\w-]/.test(c)) {\n          state = ATTR_KEY\n          reg = c\n        } else if (state === ATTR && /\\s/.test(c)) {\n          if (reg.length) res.push([ATTR_KEY,reg])\n          res.push([ATTR_BREAK])\n        } else if (state === ATTR_KEY && /\\s/.test(c)) {\n          res.push([ATTR_KEY,reg])\n          reg = ''\n          state = ATTR_KEY_W\n        } else if (state === ATTR_KEY && c === '=') {\n          res.push([ATTR_KEY,reg],[ATTR_EQ])\n          reg = ''\n          state = ATTR_VALUE_W\n        } else if (state === ATTR_KEY) {\n          reg += c\n        } else if ((state === ATTR_KEY_W || state === ATTR) && c === '=') {\n          res.push([ATTR_EQ])\n          state = ATTR_VALUE_W\n        } else if ((state === ATTR_KEY_W || state === ATTR) && !/\\s/.test(c)) {\n          res.push([ATTR_BREAK])\n          if (/[\\w-]/.test(c)) {\n            reg += c\n            state = ATTR_KEY\n          } else state = ATTR\n        } else if (state === ATTR_VALUE_W && c === '\"') {\n          state = ATTR_VALUE_DQ\n        } else if (state === ATTR_VALUE_W && c === \"'\") {\n          state = ATTR_VALUE_SQ\n        } else if (state === ATTR_VALUE_DQ && c === '\"') {\n          res.push([ATTR_VALUE,reg],[ATTR_BREAK])\n          reg = ''\n          state = ATTR\n        } else if (state === ATTR_VALUE_SQ && c === \"'\") {\n          res.push([ATTR_VALUE,reg],[ATTR_BREAK])\n          reg = ''\n          state = ATTR\n        } else if (state === ATTR_VALUE_W && !/\\s/.test(c)) {\n          state = ATTR_VALUE\n          i--\n        } else if (state === ATTR_VALUE && /\\s/.test(c)) {\n          res.push([ATTR_VALUE,reg],[ATTR_BREAK])\n          reg = ''\n          state = ATTR\n        } else if (state === ATTR_VALUE || state === ATTR_VALUE_SQ\n        || state === ATTR_VALUE_DQ) {\n          reg += c\n        }\n      }\n      if (state === TEXT && reg.length) {\n        res.push([TEXT,reg])\n        reg = ''\n      } else if (state === ATTR_VALUE && reg.length) {\n        res.push([ATTR_VALUE,reg])\n        reg = ''\n      } else if (state === ATTR_VALUE_DQ && reg.length) {\n        res.push([ATTR_VALUE,reg])\n        reg = ''\n      } else if (state === ATTR_VALUE_SQ && reg.length) {\n        res.push([ATTR_VALUE,reg])\n        reg = ''\n      } else if (state === ATTR_KEY) {\n        res.push([ATTR_KEY,reg])\n        reg = ''\n      }\n      return res\n    }\n  }\n\n  function strfn (x) {\n    if (typeof x === 'function') return x\n    else if (typeof x === 'string') return x\n    else if (x && typeof x === 'object') return x\n    else return concat('', x)\n  }\n}\n\nfunction quot (state) {\n  return state === ATTR_VALUE_SQ || state === ATTR_VALUE_DQ\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty\nfunction has (obj, key) { return hasOwn.call(obj, key) }\n\nvar closeRE = RegExp('^(' + [\n  'area', 'base', 'basefont', 'bgsound', 'br', 'col', 'command', 'embed',\n  'frame', 'hr', 'img', 'input', 'isindex', 'keygen', 'link', 'meta', 'param',\n  'source', 'track', 'wbr',\n  // SVG TAGS\n  'animate', 'animateTransform', 'circle', 'cursor', 'desc', 'ellipse',\n  'feBlend', 'feColorMatrix', 'feComposite',\n  'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap',\n  'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR',\n  'feGaussianBlur', 'feImage', 'feMergeNode', 'feMorphology',\n  'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile',\n  'feTurbulence', 'font-face-format', 'font-face-name', 'font-face-uri',\n  'glyph', 'glyphRef', 'hkern', 'image', 'line', 'missing-glyph', 'mpath',\n  'path', 'polygon', 'polyline', 'rect', 'set', 'stop', 'tref', 'use', 'view',\n  'vkern'\n].join('|') + ')(?:[\\.#][a-zA-Z0-9\\u007F-\\uFFFF_:-]+)*$')\nfunction selfClosing (tag) { return closeRE.test(tag) }\n","export default options => {\n\tconst defer = (fn, data) => {\n\t\tsetTimeout(_ => fn(data), 0)\n\t}\n\n\tconst merge = (a, b) => {\n\t\tvar obj = {}, key\n\n\t\tif (isPrimitive(typeof b) || Array.isArray(b)) {\n\t\t\treturn b\n\t\t}\n\n\t\tfor (key in a) {\n\t\t\tobj[key] = a[key]\n\t\t}\n\t\tfor (key in b) {\n\t\t\tobj[key] = b[key]\n\t\t}\n\n\t\treturn obj\n\t}\n\n\tconst isPrimitive = type => type === \"string\" || type === \"number\" || type === \"boolean\"\n\n\tconst render = (model, view, lastNode) => {\n\t\tpatch(root, node = view(model, msg), lastNode, 0)\n\t}\n\n\tconst shouldUpdate = (a, b) => a.tag !== b.tag || typeof a !== typeof b || isPrimitive(typeof a) && a !== b\n\n\tconst patch = (parent, node, oldNode, index) => {\n\t\tif (oldNode === undefined) {\n\t\t\tparent.appendChild(createElementFrom(node))\n\n\t\t} else if (node === undefined) {\n\t\t\twhile (index > 0 && !parent.childNodes[index]) {\n\t\t\t\tindex--\n\t\t\t}\n\n\t\t\tif (index >= 0) {\n\t\t\t\tvar element = parent.childNodes[index]\n\n\t\t\t\tif (oldNode && oldNode.data) {\n\t\t\t\t\tvar hook = oldNode.data.onremove\n\t\t\t\t\tif (hook) {\n\t\t\t\t\t\tdefer(hook, element)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tparent.removeChild(element)\n\t\t\t}\n\n\t\t} else if (shouldUpdate(node, oldNode)) {\n\t\t\tparent.replaceChild(createElementFrom(node), parent.childNodes[index])\n\n\t\t} else if (node.tag) {\n\t\t\tvar element = parent.childNodes[index]\n\n\t\t\tupdateElementData(element, node.data, oldNode.data)\n\n\t\t\tvar len = node.tree.length, oldLen = oldNode.tree.length\n\n\t\t\tfor (var i = 0; i < len || i < oldLen; i++) {\n\t\t\t\tpatch(element, node.tree[i], oldNode.tree[i], i)\n\t\t\t}\n\t\t}\n\t}\n\n\tconst createElementFrom = node => {\n\t\tvar element\n\n\t\tif (isPrimitive(typeof node)) {\n\t\t\telement = document.createTextNode(node)\n\n\t\t} else {\n\t\t\telement = node.data && node.data.ns\n\t\t\t\t? document.createElementNS(node.data.ns, node.tag)\n\t\t\t\t: document.createElement(node.tag)\n\n\t\t\tfor (var name in node.data) {\n\t\t\t\tif (name === \"oncreate\") {\n\t\t\t\t\tdefer(node.data[name], element)\n\t\t\t\t} else {\n\t\t\t\t\tsetElementData(element, name, node.data[name])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < node.tree.length; i++) {\n\t\t\t\telement.appendChild(createElementFrom(node.tree[i]))\n\t\t\t}\n\t\t}\n\n\t\treturn element\n\t}\n\n\tconst setElementData = (element, name, value, oldValue) => {\n\t\tif (name === \"style\") {\n\t\t\tfor (var i in value) {\n\t\t\t\telement.style[i] = value[i]\n\t\t\t}\n\n\t\t} else if (name.substr(0, 2) === \"on\") {\n\t\t\tvar event = name.substr(2)\n\t\t\telement.removeEventListener(event, oldValue)\n\t\t\telement.addEventListener(event, value)\n\n\t\t} else {\n\t\t\tif (value === \"false\" || value === false) {\n\t\t\t\telement.removeAttribute(name)\n\t\t\t\telement[name] = false\n\t\t\t} else {\n\t\t\t\telement.setAttribute(name, value)\n\t\t\t\telement[name] = value\n\t\t\t}\n\t\t}\n\t}\n\n\tconst removeElementData = (element, name, value) => {\n\t\telement.removeAttribute(name === \"className\" ? \"class\" : name)\n\n\t\tif (typeof value === \"boolean\" || value === \"true\" || value === \"false\") {\n\t\t\telement[name] = false\n\t\t}\n\t}\n\n\tconst updateElementData = (element, data, oldData) => {\n\t\tfor (var name in merge(oldData, data)) {\n\t\t\tvar value = data[name], oldValue = oldData[name]\n\n\t\t\tif (value === undefined) {\n\t\t\t\tremoveElementData(element, name, oldValue)\n\n\t\t\t} else if (value !== oldValue) {\n\t\t\t\tname === \"onupdate\"\n\t\t\t\t\t? defer(value, element)\n\t\t\t\t\t: setElementData(element, name, value, oldValue)\n\t\t\t}\n\t\t}\n\t}\n\n\tconst regexify = path => {\n\t\tvar keys = [], re = \"^\" + path\n\t\t\t.replace(/\\//g, \"\\\\/\")\n\t\t\t.replace(/:([A-Za-z0-9_]+)/g, (_, key) => {\n\t\t\t\tkeys.push(key)\n\t\t\t\treturn \"([A-Za-z0-9_]+)\"\n\t\t\t}) + \"/?$\"\n\n\t\treturn { re: re, keys: keys }\n\t}\n\n\tconst route = (routes, path) => {\n\t\tfor (var route in routes) {\n\t\t\tvar re = regexify(route), params = {}, match\n\n\t\t\tpath.replace(new RegExp(re.re, \"g\"), function() {\n\t\t\t\tfor (var i = 1; i < arguments.length - 2; i++) {\n\t\t\t\t\tparams[re.keys.shift()] = arguments[i]\n\t\t\t\t}\n\t\t\t\tmatch = (model, msg) => routes[route](model, msg, params)\n\t\t\t})\n\n\t\t\tif (match) {\n\t\t\t\treturn match\n\t\t\t}\n\t\t}\n\n\t\treturn routes[\"/\"]\n\t}\n\n\tvar msg = {}\n\n\tvar model = options.model\n\tvar reducers = options.update || {}\n\tvar effects = options.effects || {}\n\tvar subs = options.subs || {}\n\n\tvar hooks = merge({\n\t\tonAction: Function.prototype,\n\t\tonUpdate: Function.prototype,\n\t\tonError: err => {\n\t\t\tthrow err\n\t\t}\n\t}, options.hooks)\n\n\tvar node\n\tvar root = options.root || document.body.appendChild(document.createElement(\"div\"))\n\tvar view = options.view || (_ => root)\n\tvar routes = typeof view === \"function\" ? undefined : view\n\n\tif (routes) {\n\t\tview = route(routes, location.pathname)\n\n\t\tmsg.setLocation = data => {\n\t\t\trender(model, view = route(routes, data), node)\n\t\t\thistory.pushState({}, \"\", data)\n\t\t}\n\n\t\twindow.addEventListener(\"popstate\", _ => {\n\t\t\trender(model, view = route(routes, location.pathname), node)\n\t\t})\n\n\t\twindow.addEventListener(\"click\", e => {\n\t\t\tif (e.metaKey || e.shiftKey || e.ctrlKey || e.altKey) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tvar target = e.target\n\n\t\t\twhile (target && target.localName !== \"a\") {\n\t\t\t\ttarget = target.parentNode\n\t\t\t}\n\n\t\t\tif (target && target.host === location.host\n\t\t\t\t&& !target.hasAttribute(\"data-no-routing\")) {\n\n\t\t\t\tvar element = target.hash === \"\" ? element : document.querySelector(target.hash)\n\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView(true)\n\t\t\t\t} else {\n\t\t\t\t\tmsg.setLocation(target.pathname)\n\t\t\t\t\te.preventDefault()\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tfor (let name in merge(reducers, effects)) {\n\t\tmsg[name] = data => {\n\t\t\thooks.onAction(name, data)\n\n\t\t\tvar effect = effects[name]\n\t\t\tif (effect) {\n\t\t\t\treturn effect(model, msg, data, hooks.onError)\n\t\t\t}\n\n\t\t\tvar update = reducers[name], _model = model\n\t\t\trender(model = merge(model, update(model, data)), view, node)\n\n\t\t\thooks.onUpdate(_model, model, data)\n\t\t}\n\t}\n\n\tdocument.addEventListener(\"DOMContentLoaded\", _ => {\n\t\tfor (var sub in subs) {\n\t\t\tsubs[sub](model, msg, hooks.onError)\n\t\t}\n\t})\n\n\trender(model, view)\n}\n","const svg = (tag, data, tree) => {\n\tdata.ns = \"http://www.w3.org/2000/svg\"\n\n\ttree.forEach(node => {\n\t\tif (node.data) {\n\t\t\tsvg(node.tag, node.data, node.tree)\n\t\t}\n\t})\n}\n\nexport default (tag, data, tree) => {\n\tif (tag === \"svg\") {\n\t\tsvg(tag, data, tree)\n\t}\n\n\treturn {\n\t\ttag: tag,\n\t\tdata: data || {},\n\t\ttree: [].concat.apply([], tree)\n\t}\n}\n","import hyperx from \"hyperx\"\nimport app from \"./app.js\"\nimport h from \"./h.js\"\n\nexport default { app, h, html: hyperx(h) }\n"],"names":["attributeToProperty","h","tagName","attrs","children","attr","transform","quot","state","ATTR_VALUE_SQ","ATTR_VALUE_DQ","selfClosing","tag","closeRE","test","class","for","http-equiv","attrToProp","require$$0","VAR","TEXT","OPEN","CLOSE","ATTR","ATTR_KEY","ATTR_KEY_W","ATTR_VALUE_W","ATTR_VALUE","ATTR_EQ","ATTR_BREAK","opts","strfn","x","concat","a","b","String","strings","parse","str","res","i","length","c","charAt","reg","push","arglen","arguments","parts","arg","p","xstate","apply","tree","stack","cur","s","ix","pop","undefined","copyKey","key","hasOwnProperty","j","toLowerCase","Array","isArray","Error","shift","RegExp","join","options","const","node","defer","fn","data","setTimeout","_","merge","obj","isPrimitive","type","render","model","view","lastNode","patch","root","msg","shouldUpdate","parent","oldNode","index","appendChild","createElementFrom","childNodes","element","hook","onremove","removeChild","replaceChild","updateElementData","len","oldLen","document","createTextNode","ns","createElementNS","createElement","name","setElementData","value","oldValue","style","substr","event","removeEventListener","addEventListener","removeAttribute","setAttribute","removeElementData","oldData","regexify","path","keys","re","replace","route","routes","match","params","reducers","update","effects","subs","hooks","onAction","Function","prototype","onUpdate","onError","err","body","location","pathname","setLocation","history","pushState","window","e","metaKey","shiftKey","ctrlKey","altKey","target","localName","parentNode","host","hasAttribute","hash","querySelector","scrollIntoView","preventDefault","effect","_model","let","loop","sub","svg","forEach","app","html","hyperx"],"mappings":"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"}