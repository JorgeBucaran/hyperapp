!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.hyperapp=t()}(this,function(){"use strict";function e(e){return function(t,n,r){for(var a in n)a in o&&(n[o[a]]=n[a],delete n[a]);return e(t,n,r)}}function t(e){return e===g||e===v}function n(e){return w.test(e)}var r=e,o={class:"className",for:"htmlFor","http-equiv":"httpEquiv"},a=r,i=0,f=1,s=2,u=3,l=4,p=5,h=6,c=7,d=8,g=9,v=10,m=11,y=12,b=function(e,r){function o(e){return"function"==typeof e?e:"string"==typeof e?e:e&&"object"==typeof e?e:b("",e)}e=a(e),r||(r={});var b=r.concat||function(e,t){return String(e)+String(t)};return function(r){function a(e){var n=[];A===c&&(A=l);for(var r=0;r<e.length;r++){var o=e.charAt(r);A===f&&"<"===o?(E.length&&n.push([f,E]),E="",A=s):">"!==o||t(A)?A===f?E+=o:A===s&&/\s/.test(o)?(n.push([s,E]),E="",A=l):A===s?E+=o:A===l&&/[\w-]/.test(o)?(A=p,E=o):A===l&&/\s/.test(o)?(E.length&&n.push([p,E]),n.push([y])):A===p&&/\s/.test(o)?(n.push([p,E]),E="",A=h):A===p&&"="===o?(n.push([p,E],[m]),E="",A=c):A===p?E+=o:A!==h&&A!==l||"="!==o?A!==h&&A!==l||/\s/.test(o)?A===c&&'"'===o?A=v:A===c&&"'"===o?A=g:A===v&&'"'===o?(n.push([d,E],[y]),E="",A=l):A===g&&"'"===o?(n.push([d,E],[y]),E="",A=l):A!==c||/\s/.test(o)?A===d&&/\s/.test(o)?(n.push([d,E],[y]),E="",A=l):A!==d&&A!==g&&A!==v||(E+=o):(A=d,r--):(n.push([y]),/[\w-]/.test(o)?(E+=o,A=p):A=l):(n.push([m]),A=c):(A===s?n.push([s,E]):A===p?n.push([p,E]):A===d&&E.length&&n.push([d,E]),n.push([u]),E="",A=f)}return A===f&&E.length?(n.push([f,E]),E=""):A===d&&E.length?(n.push([d,E]),E=""):A===v&&E.length?(n.push([d,E]),E=""):A===g&&E.length?(n.push([d,E]),E=""):A===p&&(n.push([p,E]),E=""),n}for(var w=arguments,A=f,E="",L=arguments.length,k=[],N=0;N<r.length;N++)if(N<L-1){var C=w[N+1],x=a(r[N]),F=A;F===v&&(F=d),F===g&&(F=d),F===c&&(F=d),F===l&&(F=p),x.push([i,F,C]),k.push.apply(k,x)}else k.push.apply(k,a(r[N]));for(var S=[null,{},[]],M=[[S,-1]],N=0;N<k.length;N++){var D=M[M.length-1][0],x=k[N],T=x[0];if(T===s&&/^\//.test(x[1])){var j=M[M.length-1][1];M.length>1&&(M.pop(),M[M.length-1][0][2][j]=e(D[0],D[1],D[2].length?D[2]:void 0))}else if(T===s){var K=[x[1],{},[]];D[2].push(K),M.push([K,D[2].length-1])}else if(T===p||T===i&&x[1]===p){for(var R,q="";N<k.length;N++)if(k[N][0]===p)q=b(q,k[N][1]);else{if(k[N][0]!==i||k[N][1]!==p)break;if("object"!=typeof k[N][2]||q)q=b(q,k[N][2]);else for(R in k[N][2])k[N][2].hasOwnProperty(R)&&!D[1][R]&&(D[1][R]=k[N][2][R])}k[N][0]===m&&N++;for(var z=N;N<k.length;N++)if(k[N][0]===d||k[N][0]===p)D[1][q]?D[1][q]=b(D[1][q],k[N][1]):D[1][q]=o(k[N][1]);else{if(k[N][0]!==i||k[N][1]!==d&&k[N][1]!==p){!q.length||D[1][q]||N!==z||k[N][0]!==u&&k[N][0]!==y||(D[1][q]=q.toLowerCase());break}D[1][q]?D[1][q]=b(D[1][q],k[N][2]):D[1][q]=o(k[N][2])}}else if(T===p)D[1][x[1]]=!0;else if(T===i&&x[1]===p)D[1][x[2]]=!0;else if(T===u){if(n(D[0])&&M.length){var j=M[M.length-1][1];M.pop(),M[M.length-1][0][2][j]=e(D[0],D[1],D[2].length?D[2]:void 0)}}else if(T===i&&x[1]===f)void 0===x[2]||null===x[2]?x[2]="":x[2]||(x[2]=b("",x[2])),Array.isArray(x[2][0])?D[2].push.apply(D[2],x[2]):D[2].push(x[2]);else if(T===f)D[2].push(x[1]);else if(T!==m&&T!==y)throw new Error("unhandled: "+T)}if(S[2].length>1&&/^\s*$/.test(S[2][0])&&S[2].shift(),S[2].length>2||2===S[2].length&&/\S/.test(S[2][1]))throw new Error("multiple root elements must be wrapped in an enclosing tag");return Array.isArray(S[2][0])&&"string"==typeof S[2][0][0]&&Array.isArray(S[2][0][2])&&(S[2][0]=e(S[2][0][0],S[2][0][1],S[2][0][2])),S[2][0]}},w=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-ï¿¿_:-]+)*$"),A=function(e){var t,n=function(e,t){setTimeout(function(n){return e(t)},0)},r=function(e,t){var n,r={};if(o(typeof t)||Array.isArray(t))return t;for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r},o=function(e){return"string"===e||"number"===e||"boolean"===e},a=function(e,n,r){f(w,t=n(e,d),r,0)},i=function(e,t){return e.tag!==t.tag||typeof e!=typeof t||o(typeof e)&&e!==t},f=function(e,t,r,o){if(void 0===r)e.appendChild(s(t));else if(void 0===t){for(;o>0&&!e.childNodes[o];)o--;if(o>=0){var a=e.childNodes[o];if(r&&r.data){var u=r.data.onremove;u&&n(u,a)}e.removeChild(a)}}else if(i(t,r))e.replaceChild(s(t),e.childNodes[o]);else if(t.tag){var a=e.childNodes[o];p(a,t.data,r.data);for(var l=t.tree.length,h=r.tree.length,c=0;c<l||c<h;c++)f(a,t.tree[c],r.tree[c],c)}},s=function(e){var t;if(o(typeof e))t=document.createTextNode(e);else{t=e.data&&e.data.ns?document.createElementNS(e.data.ns,e.tag):document.createElement(e.tag);for(var r in e.data)"oncreate"===r?n(e.data[r],t):u(t,r,e.data[r]);for(var a=0;a<e.tree.length;a++)t.appendChild(s(e.tree[a]))}return t},u=function(e,t,n,r){if("style"===t)for(var o in n)e.style[o]=n[o];else if("on"===t.substr(0,2)){var a=t.substr(2);e.removeEventListener(a,r),e.addEventListener(a,n)}else"false"===n||n===!1?(e.removeAttribute(t),e[t]=!1):(e.setAttribute(t,n),e[t]=n)},l=function(e,t,n){e.removeAttribute("className"===t?"class":t),"boolean"!=typeof n&&"true"!==n&&"false"!==n||(e[t]=!1)},p=function(e,t,o){for(var a in r(o,t)){var i=t[a],f=o[a];void 0===i?l(e,a,f):i!==f&&("onupdate"===a?n(i,e):u(e,a,i,f))}},h=function(e){var t=[],n="^"+e.replace(/\//g,"\\/").replace(/:([A-Za-z0-9_]+)/g,function(e,n){return t.push(n),"([A-Za-z0-9_]+)"})+"/?$";return{re:n,keys:t}},c=function(e,t){for(var n in e){var r,o=h(n),a={};if(t.replace(new RegExp(o.re,"g"),function(){for(var t=arguments,i=1;i<arguments.length-2;i++)a[o.keys.shift()]=t[i];r=function(t,r){return e[n](t,r,a)}}),r)return r}return e["/"]},d={},g=e.model,v=e.update||{},m=e.effects||{},y=e.subs||{},b=r({onAction:Function.prototype,onUpdate:Function.prototype,onError:function(e){throw e}},e.hooks),w=e.root||document.body.appendChild(document.createElement("div")),A=e.view||function(e){return w},E="function"==typeof A?void 0:A;E&&(A=c(E,location.pathname),d.setLocation=function(e){a(g,A=c(E,e),t),history.pushState({},"",e)},window.addEventListener("popstate",function(e){a(g,A=c(E,location.pathname),t)}),window.addEventListener("click",function(e){if(!(e.metaKey||e.shiftKey||e.ctrlKey||e.altKey)){for(var t=e.target;t&&"a"!==t.localName;)t=t.parentNode;if(t&&t.host===location.host&&!t.hasAttribute("data-no-routing")){var n=""===t.hash?n:document.querySelector(t.hash);n?n.scrollIntoView(!0):(d.setLocation(t.pathname),e.preventDefault())}}}));var L=function(e){d[e]=function(n){b.onAction(e,n);var o=m[e];if(o)return o(g,d,n,b.onError);var i=v[e],f=g;a(g=r(g,i(g,n)),A,t),b.onUpdate(f,g,n)}};for(var k in r(v,m))L(k);document.addEventListener("DOMContentLoaded",function(e){for(var t in y)y[t](g,d,b.onError)}),a(g,A)},E=function(e,t,n){t.ns="http://www.w3.org/2000/svg",n.forEach(function(e){e.data&&E(e.tag,e.data,e.tree)})},L=function(e,t,n){return"svg"===e&&E(e,t,n),{tag:e,data:t||{},tree:[].concat.apply([],n)}},k={app:A,h:L,html:b(L)};return k});
//# sourceMappingURL=hyperapp.html.min.js.map
