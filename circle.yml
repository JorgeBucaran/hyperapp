machine:
  node:
    version: stable
  environment:
    NODE_ENV: 'development'
    JEST_SUITE_NAME: HyperApp
    JEST_JUNIT_OUTPUT: $CIRCLE_TEST_REPORTS/junit.xml
  pre:
    - curl -o- -L https://yarnpkg.com/install.sh | bash
    - mkdir ~/.yarn-cache

general:
  artifacts:
    - dist/

database:
  override:
    - echo "No database"

dependencies:
  cache_directories:
    - ~/.yarn-cache
    - ~/node_modules
  override:
    - yarn
    - yarn global add codecov

test:
  pre:
    - yarn build
  override:
    - yarn test
    - codecov